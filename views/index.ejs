<%- include('./layout/header.ejs') %>
    <!-- corousel section -->
    <section>
        <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                    aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                    aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="/images/landing1.jpg" class="d-block" width="100%">
                </div>
                <div class="carousel-item">
                    <img src="/images/landing2.jpg" class="d-block" width="100%">
                </div>
                <div class="carousel-item">
                    <img src="/images/landing3.jpg" class="d-block" width="100%">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </section>
    <!-- summary section -->
    <section>
        <div style="height: 100%; background-color: #E6DDC4;">
            <h1 class="text-heading">Summarize it !</h1>
            <div class="mt-4" id="div_language">
                <div class="container">
                    <h5 class="mb-3">Select Language</h5>
                    <div class="row">
                        <div class="col-6"> <select class="form-select" id="select_language"
                                onchange="updateCountry()"></select>
                        </div>
                        <div class="col-6"><select class="form-select" id="select_dialect"></select></div>

                    </div>
                    <div class="container">
                        <form action="/summarisehindi" method="post">
                            <textarea type="text" name="hindidata" id="hindi_transcript" placeholder="Speak"
                                class="keyboardInput" style="display: none;"></textarea>
                            <input id="action" type="button" onclick="toggle()" value="Record in Hindi" />
                            <button type="submit" class="btn">Submit Hindi Audio</button>
                        </form>
                    </div>
                    <div class="row">
                        <div class="col-3"><button class="btn mt-3" id="start"
                                style="width: 100%; background-color: #678983; color: white;">Start Recording <i
                                    class="fas fa-microphone"></i></button></div>

                        <div class="mt-3 col-3">
                            <form action="/summarise" method="post">
                                <input class="btn" id="stop"
                                    style="width: 100%; background-color: #678983; color: white;"
                                    value="Stop Recording "></input><br>
                                <button class="btn" type="submit"
                                    style="width: 100%; background-color: #678983; color: white;">Submit</button>

                        </div>
                        <div class="col-4">
                            <p id="status" class="lead mt-3" style="display: none">Listenting <i
                                    class="fas fa-headphones"></i> ...</p>

                        </div>
                        <div class="col-4">

                        </div>
                        <div class="row">
                            <div class="col-3">
                                <label class="custom-file-upload mt-3 btn"
                                    style="width: 100%; background-color: #678983; color: white;">
                                    <input type="file" style="display: none;" />
                                    Upload File <i class="fas fa-upload"></i>
                                </label>
                            </div>
                            <div class="col-3 mt-3">
                                <button type="submit" class="btn"
                                    style="width: 100%; background-color: #678983; color: white; margin-left: 0.4em;">Submit</button>
                            </div>
                        </div>
                    </div>


                </div>
                <!-- <h2 class="mt-4 text-light">Transcript</h2> -->
                <div style="display: none;">
                    <input id="final" class="text-light" type="text" name="data" style="display: none;"></input>
                    <span id="interim" class="text-secondary"></span>
                </div>

                </form>
            </div>
            <br><br>
        </div>
    </section>
    <!-- about section -->
    <section>
        <div style="height: 500px; background-color: white;">
            <h1 class="text-heading">About Summariser</h1>
            <div class="row">
                <div class="col-6 p-5 text-para">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
                    tempor incididunt
                    ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
                    nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit
                    esse
                    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
                    culpa
                    qui officia deserunt mollit anim id est laborum.
                    Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium,
                    totam
                    rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt
                    explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia
                    consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. </div>
                <div class="col-6 ">
                    <img src="/images/meet.webp" />
                </div>
            </div>
        </div>
    </section>

    <!-- STEPS TO summarise -->
    <section class="step_to_summarise" id="steps-to-summarise" style="background-color: #E6DDC4; height: 100%;">
        <h2 class="title text-heading" data-aos="fade-up">Steps to Summarize</h2>
        <div class="container customize row" style="margin:auto;">
            <div class="steps-content col-6" data-aos="fade-right">
                <h4 class="sub-heading">Record/ Upload</h4>
                <p class="paragraph text-para">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus sed
                    fugit quis facere at iste explicabo. Eum alias a, quam sed ad quasi
                    officiis ex sint esse, at repellat consequatur. Lorem ipsum dolor
                    sit amet consectetur adipisicing elit.
                </p>
            </div>
            <div class="steps-content col-6" data-aos="fade-right">
                <h4 class="sub-heading">Select Audio Language</h4>
                <p class="paragraph text-para">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus sed
                    fugit quis facere at iste explicabo. Eum alias a, quam sed ad quasi
                    officiis ex sint esse, at repellat consequatur. Lorem ipsum dolor
                    sit amet consectetur adipisicing elit.
                </p>
            </div>
            <div class="steps-content col-6" data-aos="fade-right">
                <h4 class="sub-heading">Download Report</h4>
                <p class="paragraph text-para">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus sed
                    fugit quis facere at iste explicabo. Eum alias a, quam sed ad quasi
                    officiis ex sint esse, at repellat consequatur. Lorem ipsum dolor
                    sit amet consectetur adipisicing elit.
                </p>
            </div>
            <div class="steps-content col-6" data-aos="fade-right">
                <h4 class="sub-heading">Download Summarised audio</h4>
                <p class="paragraph text-para">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Ducimus sed
                    fugit quis facere at iste explicabo. Eum alias a, quam sed ad quasi
                    officiis ex sint esse, at repellat consequatur. Lorem ipsum dolor
                    sit amet consectetur adipisicing elit.
                </p>
            </div>
        </div>
        <br><br><br>
    </section>
    <!-- /STEPS TO summarise -->


    <div class="row" style="height: 500px; background-color: white;">
        <h1 class="text-heading">FAQ</h1>
        <div class="col-6">
            <img src="/images/faq.jpg" class="p-5" width="80%" alt="">
        </div>
        <div class="col-6 mt-5">

            <div data-bs-toggle="collapse" data-bs-target="#demo1">Question 1 <i class="fas fa-sort-down"
                    style="cursor: pointer;"></i></div>
            <div id="demo1" class="collapse">
                Lorem ipsum dolor text....
            </div><br>
            <div data-bs-toggle="collapse" data-bs-target="#demo2">Question 1 <i class="fas fa-sort-down"
                    style="cursor: pointer;"></i></div>
            <div id="demo2" class="collapse">
                Lorem ipsum dolor text....
            </div> <br>
            <div data-bs-toggle="collapse" data-bs-target="#demo3">Question 1 <i class="fas fa-sort-down"
                    style="cursor: pointer;"></i></div>
            <div id="demo3" class="collapse">
                Lorem ipsum dolor text....
            </div> <br>
            <div data-bs-toggle="collapse" data-bs-target="#demo4">Question 1 <i class="fas fa-sort-down"
                    style="cursor: pointer;"></i></div>
            <div id="demo4" class="collapse">
                Lorem ipsum dolor text....
            </div> <br>
            <div data-bs-toggle="collapse" data-bs-target="#demo5">Question 1 <i class="fas fa-sort-down"
                    style="cursor: pointer;"></i></div>
            <div id="demo5" class="collapse">
                Lorem ipsum dolor text....
            </div>

        </div>
    </div>
    <div style="height: 70px; background-color: #678983;">
        <footer>
            <div class="container">
                <div class="row pt-4">
                    <div class="col-12 col-md-4">
                        © 2018 - 2020 SIESGST
                    </div>
                    <div class="col-12 col-md-8">
                        <h4 style="float: right; font-size: 1em; font-weight: 800;">Developed with<span
                                style="color: white"> ❤ </span>by Pallavi, Dikshita and Sumaiya.
                        </h4>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    </body>
    <script>
        if ("webkitSpeechRecognition" in window) {
            let speechRecognition = new webkitSpeechRecognition();
            let final_transcript = "";

            speechRecognition.continuous = true;
            speechRecognition.interimResults = true;
            speechRecognition.lang = document.querySelector("#select_dialect").value;

            speechRecognition.onstart = () => {
                document.querySelector("#status").style.display = "block";
            };
            speechRecognition.onerror = () => {
                document.querySelector("#status").style.display = "none";
                console.log("Speech Recognition Error");
            };
            speechRecognition.onend = () => {
                document.querySelector("#status").style.display = "none";
                console.log("Speech Recognition Ended");
            };

            speechRecognition.onresult = (event) => {
                let interim_transcript = "";

                for (let i = event.resultIndex; i < event.results.length; ++i) {
                    if (event.results[i].isFinal) {
                        final_transcript += event.results[i][0].transcript;
                    } else {
                        interim_transcript += event.results[i][0].transcript;
                    }
                }
                document.querySelector("#final").setAttribute("value", final_transcript);
                document.querySelector("#final").innerHTML = final_transcript;
                document.querySelector("#interim").innerHTML = interim_transcript;
            };

            document.querySelector("#start").onclick = () => {
                speechRecognition.start();
            };
            document.querySelector("#stop").onclick = () => {
                speechRecognition.stop();
                alert("Audio Saved Successfully!!");
            };
        } else {
            console.log("Speech Recognition Not Available");
        }
    </script>
    <script>
        var langs =
            [['English', ['en-IN', 'India']]];

        let select_language = document.querySelector('#select_language');
        let select_dialect = document.querySelector('#select_dialect');

        for (var i = 0; i < langs.length; i++) {
            select_language.options[i] = new Option(langs[i][0], i);
        }

        select_language.selectedIndex = 6;
        // updateCountry();
        select_dialect.selectedIndex = 6;

        function updateCountry() {
            for (var i = select_dialect.options.length - 1; i >= 0; i--) {
                select_dialect.remove(i);
            }
            var list = langs[select_language.selectedIndex];
            for (var i = 1; i < list.length; i++) {
                select_dialect.options.add(new Option(list[i][1], list[i][0]));
            }
            select_dialect.style.visibility = list[1].length == 1 ? 'hidden' : 'visible';
        }

        //hindi recording coe ------------------------------>>

        var recognition = new webkitSpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = true;
        recognition.lang = "hi-IN";

        var listening = false;

        recognition.onresult = function (event) {
            var interim_hindi_transcript = '';
            var final_hindi_transcript = '';

            for (var i = event.resultIndex; i < event.results.length; ++i) {
                if (event.results[i].isFinal) {
                    final_hindi_transcript += event.results[i][0].transcript;
                    document.getElementById('hindi_transcript').value = final_hindi_transcript;
                    toggle();
                } else {
                    interim_hindi_transcript += event.results[i][0].transcript;
                    document.getElementById('hindi_transcript').value = interim_hindi_transcript;
                }
            }
            document.querySelector("#hindi_final").setAttribute("value", final_hindi_transcript);
        };

        function toggle() {
            if (listening) {
                recognition.stop();
                listening = false;
                document.getElementById('action').value = "Start";
            }
            else {
                recognition.start();
                listening = true;
                document.getElementById('action').value = "Stop";
            }
        }
    </script>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <%- include('./layout/footer.ejs') %>